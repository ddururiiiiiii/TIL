## 리눅스에서 새로운 프로그램을 생성하는 두가지 목적

1. 작업을 분리 : 하나의 작업을 여러 프로세스가 나누어 처리함.
    - ex. 웹서버에서 클라이언트 요청을 별도의 프로세스로 처리함.
2. 프로그램 실행 : 새로운 프로그램을 실행하기 위해 프로세스를 생성.
    - ex. 쉘에서 명령어를 입력 → 해당 프로그램이 새로운 프로세스로 실행.

## fork()

- 현재 실행 중인 프로세스를 복제하여 새로운 프로세스를 만듦.
- 부모 프로세스를 복사하므로 자식 프로세스는 부모와 거의 동일한 상태에서 시작
- 부모와 자식은 별도의 메모리를 사용.
- **리턴값**:
    - 부모 프로세스: 자식의 PID를 반환.
    - 자식 프로세스: 0을 반환.

## **exec()**

- **역할** : 현재 프로세스를 새로운 프로그램으로 대체
- **특징** : 기존의 프로세스 메모리를 덮어씌우며, 새로운 프로그램이 실행.
- fork()와 함께 사용 : fork()로 프로세스를 생성한 후, exec()를 호출하여 새로운 프로그램을 실행하는 것이 일반적.

## **ASLR (Address Space Layout Randomization)**

- 주소 공간 배치 난수화.
- 프로그램의 메모리 주소를 매번 무작위로 변경하여 보안을 강화
- **이유** : 메모리 취약점을 이용한 공격(예: 버퍼 오버플로우)을 어렵게 만듦.
    - 예: 코드 영역, 힙, 스택 주소가 실행마다 달라짐.

## **프로세스의 부모-자식 관계**

- 리눅스에서 모든 프로세스는 부모-자식 관계를 가짐.
- 부모 프로세스: 자식 프로세스를 생성한 프로세스.
- 자식 프로세스: fork()를 통해 생성된 프로세스.
- **특징**:
    - 부모는 자식의 상태를 확인하고 종료를 기다릴 수 있음 (wait()).
    - 부모가 종료되면 자식 프로세스는 고아 프로세스가 됨.

## **프로세스 상태**

1. **Running**: 실행 중.
2. **Sleeping**: I/O 요청 등으로 대기 중.
3. **Stopped**: 일시 정지 (SIGSTOP 시그널 등).
4. **Zombie**: 자식이 종료되었지만, 부모가 종료 상태를 수집하지 않은 상태.

## **프로세스 종료**

- **정상 종료**: 프로세스가 할 일을 끝내고 종료.
- **비정상 종료**: 오류나 강제 종료(kill 명령 등)로 종료.

### **좀비 프로세스**

- **뜻**: 종료된 자식 프로세스의 정보가 부모에 의해 수집되지 않아 ps 명령에 나타나는 상태.
    - 자식 프로세스가 종료했음을 알리지만 부모프로세스가 이를 무시해서 자식프로세스가 끝났음에도 기록이 남아있어 귀신처럼 떠도는 상태.
- **특징**: 좀비는 자원을 소모하지 않지만 많아지면 PID 고갈 위험이 있음.
- 해결 방법: 부모 프로세스가 wait() 호출.

### **고아 프로세스**

- **뜻**: 부모 프로세스가 먼저 종료되어 부모를 잃은 자식 프로세스.
- **특징**: 고아 프로세스는 자동으로 init 프로세스(1번 PID)로 부모가 변경

## **시그널 (Signals)**

- 프로세스 간 통신을 위해 사용되는 신호.
- **종류**:
    - SIGKILL (9): 프로세스를 강제로 종료.
    - SIGTERM (15): 프로세스를 종료 요청 (정상적인 종료 유도).
    - SIGSTOP: 프로세스를 일시 정지.
    - SIGCONT: 정지된 프로세스를 재개.
- **사용**:
    - 명령어: kill -SIGNAL PID (예: kill -9 1234).
    - 프로그래밍: signal() 함수를 사용하여 처리 가능.

## 데몬 (**Daemon**)

- **백그라운드에서 실행되며 특정 작업이나 서비스를 제공하는 프로그램**
- 사용자가 직접 실행하거나 종료하지 않고, 시스템이 부팅되거나 필요할 때 자동으로 실행
- **백그라운드 실행**: 데몬은 화면에 보이지 않는 상태로 동작하며, 터미널과 독립적으로 실행
- **특정 역할 수행**: 시스템에서 특정한 작업(예: 파일 공유, 네트워크 관리, 로그 기록)을 처리
- **자동 실행**: 시스템이 부팅될 때 시작되며, 필요에 따라 자동으로 실행
- **이름 규칙**: 대부분의 데몬은 이름 끝에 **d**가 붙음.
    - 예: sshd (SSH 데몬), httpd (웹 서버 데몬), crond (크론 작업 스케줄러 데몬).

### **데몬의 실생활 비유**

- **공항의 자동화 시스템**
    - sshd는 공항의 보안 게이트처럼, 사람들이 들어오면 확인하고 승인.
    - crond는 안내 방송처럼, 정해진 시간에 알림을 제공.
    - httpd는 체크인 키오스크처럼, 요청하면 데이터를 제공.

### **데몬 확인하기**

- **실행 중인 데몬 확인**:

```bash
ps -ef | grep sshd
```

- **시스템에서 활성화된 서비스 보기**:

```bash
systemctl list-units --type=service
```

- 모든 서비스(데몬 포함)의 상태를 확인.

- **특정 데몬 시작/중지**:

```bash
sudo systemctl start sshd    # 데몬 시작
sudo systemctl stop sshd     # 데몬 중지
sudo systemctl restart sshd  # 데몬 재시작
```

