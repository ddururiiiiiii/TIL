# ** 쿼리 익스플레인 **
- 데이터베이스에서 **SQL 쿼리가 실행되는 과정을 분석**하고, 성능을 최적화하기 위해 사용되는 도구

<br>

---

<br>


- 데이터베이스에서 **SQL 쿼리가 실행되는 과정을 분석**하고, 성능을 최적화하기 위해 사용되는 도구
    - 쿼리가 데이터를 효율적으로 검색하는지 확인.
    - 데이터베이스가 인덱스를 사용하는지 테이블 전체 스캔하는지 확인.
    - 최적화 힌트를 제공하여 느린 쿼리를 최적화 하는데 도움.
- SQL 쿼리를 실행하기 전, 데이터베이스가 해당 쿼리를 처리하기 위한 **실행 계획(Execution Plan)**을 보여줌.

### **쿼리 익스플레인의 장점**
1. **성능 분석**: 느린 쿼리를 식별하고, 병목 지점을 개선.
2. **인덱스 활용 확인**: 데이터베이스가 쿼리에서 인덱스를 적절히 사용하는지 확인.
3. **최적화 힌트 제공**:테이블 스캔, 정렬, 임시 테이블 사용 여부 확인.

### **쿼리 익스플레인의 단점**
1. **동적 값 평가 불가**: 실제 값이 아닌 쿼리 구조를 기준으로 실행 계획을 예측.
2. **실제 실행 시간 제공 불가**: 예상되는 행(row) 수를 보여주지만, 실제 쿼리 실행 시간은 제공하지 않음.


### **쿼리 익스플레인 사용법**
### **MySQL에서 EXPLAIN 명령어 사용**

```sql
EXPLAIN SELECT * FROM Employees WHERE age > 30;
```

### **결과 예시**

| id | select_type | table | type | possible_keys | key | rows | Extra |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | SIMPLE | Employees | ALL | idx_age | NULL | 1000 | Using where |

---

### **EXPLAIN의 주요 컬럼 해석**

### 1. **id**

- 쿼리의 실행 순서를 나타냄.
- 값이 클수록 먼저 실행.

### 2. **select_type**

- 쿼리의 유형.
    - **SIMPLE**: 단순 SELECT.
    - **PRIMARY**: 메인 쿼리.
    - **SUBQUERY**: 서브쿼리.
    - **UNION**: UNION 작업.

### 3. **table**

- 데이터가 검색되는 테이블의 이름.

### 4. **type**

- 데이터 검색 방법.
    - **ALL**: 테이블 전체 스캔(비효율적).
    - **INDEX**: 인덱스만 스캔.
    - **RANGE**: 조건 범위에 따라 검색.
    - **REF**: 특정 값(외래 키 등)으로 검색.
    - **EQ_REF**: 기본 키나 유니크 키 검색(가장 효율적).
    - **CONST**: 상수 검색(효율적).

### 5. **possible_keys**

- 쿼리에 사용할 수 있는 인덱스 목록.

### 6. **key**

- 실제 사용된 인덱스.

### 7. **rows**

- 검색해야 할 예상 행(row) 수.

### 8. **Extra**

- 추가 정보.
    - **Using where**: 조건문 사용.
    - **Using index**: 인덱스를 통해 데이터를 검색.
    - **Using temporary**: 임시 테이블 사용.
    - **Using filesort**: 데이터 정렬 필요(성능 저하 가능).
