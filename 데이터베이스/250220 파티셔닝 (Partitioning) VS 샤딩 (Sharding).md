# **파티셔닝 (Partitioning)VS 샤딩 (Sharding)**
- 대량의 데이터를 효과적으로 관리하고 처리하기 위해 **데이터를 나누는 기술**

### 파티셔닝 (Partitioning)
- 하나의 데이터베이스 테이블을 여러 파티션으로 나눔.

### 샤딩 (Sharding)
- 데이터베이스 서버 자체를 여러 서버로 분리함.

<br>

---

<br>

### **파티셔닝(Partitioning)**
- **하나의 데이터베이스 테이블**을 **분리된 여러 파티션**으로 나누는 기술.
- 데이터는 여전히 **하나의 데이터베이스** 내에 저장되며, 데이터베이스 관리 시스템(DBMS)이 이를 처리

### **파티셔닝의 유형**
1. **수평 파티셔닝 (Horizontal Partitioning)**:
    - **행(Row)** 단위로 데이터를 분리.
    - 각 파티션은 동일한 테이블 구조를 가지며, 특정 조건에 따라 데이터를 나눔.
    - **예시**: 고객 테이블을 고객 ID 범위에 따라 분리 (1~~1000, 1001~~2000 등).
2. **수직 파티셔닝 (Vertical Partitioning)**:
    - **열(Column)** 단위로 데이터를 분리.
    - 자주 사용되는 열은 하나의 테이블에 두고, 나머지는 다른 테이블로 분리.
    - **예시**:고객 테이블에서 개인 정보(이름, 주소)와 구매 내역(주문 번호, 금액)을 분리.

### **파티셔닝의 장점**
1. **성능 향상**: 특정 조건으로 데이터를 조회할 때, 필요한 파티션만 검색하므로 성능이 향상됨.
2. **관리 용이**: 각 파티션을 별도로 관리하거나, 백업 및 복구를 수행 가능.
3. **확장성**: 데이터가 커질수록 새로운 파티션을 추가 가능.

### **파티셔닝의 단점**
1. **관리 복잡성**: 파티션 기준 설정과 관리가 필요.
2. **한계**: 파티셔닝은 **하나의 데이터베이스 서버**에서만 동작하므로 서버 확장에는 한계가 있음.

---

### **샤딩(Sharding)**

- **데이터베이스 자체를 여러 서버**로 분리하여 데이터를 분산 저장하는 기술.
- 각 서버는 독립적인 데이터베이스를 운영(각 샤드는 다른 물리적 서버에서 작 동하며 데이터를 분리하는 기준(샤딩 키)가 존재)하며, 전체 데이터를 나누어 저장.


### **샤딩의 방식**

1. **Range Sharding (범위 기준)**:
    - 데이터를 특정 범위로 나누어 저장.
    - **예시**:
        - 고객 ID가 1~1000인 데이터는 샤드 A에 저장.
        - 고객 ID가 1001~2000인 데이터는 샤드 B에 저장.
2. **Hash Sharding**:
    - 해싱(Hashing) 함수를 사용해 데이터를 나눔.
    - **예시**:
        - `customer_id % 3 = 0`이면 샤드 A.
        - `customer_id % 3 = 1`이면 샤드 B.
3. **Geo Sharding (지역 기반)**:
    - 지역 정보를 기준으로 데이터를 나눔.
    - **예시**:
        - 아시아 데이터는 샤드 A.
        - 유럽 데이터는 샤드 B.

### **샤딩의 장점**
1. **수평 확장 가능**: 데이터베이스 서버를 추가하여 무한히 확장 가능.
2. **트래픽 분산**: 각 샤드가 독립적으로 작동하므로, 성능과 트래픽 처리량이 증가.
3. **대규모 데이터 처리**: 대량의 데이터를 저장하고 처리하기 적합.

### **샤딩의 단점**
1. **복잡한 관리**: 각 샤드의 데이터 분배, 동기화, 백업 관리가 어려움.
2. **데이터 재배치**: 샤딩 키 변경 또는 서버 추가 시 데이터 이동 필요.
3. **조인 연산 불편**: 서로 다른 샤드 간의 데이터를 조인하려면 애플리케이션 레벨에서 처리해야 함.

### **파티셔닝과 샤딩의 비교**
| **특징** | **파티셔닝(Partitioning)** | **샤딩(Sharding)** |
| --- | --- | --- |
| **적용 대상** | 데이터베이스 **내부**의 테이블 | 데이터베이스 **전체**를 여러 서버로 분리 |
| **사용 환경** | 단일 데이터베이스 서버 | 여러 데이터베이스 서버 |
| **확장성** | 단일 서버 확장에 한계 | 수평 확장이 가능 |
| **조인(Join)** | 파티션 간 조인 가능 | 샤드 간 조인이 어려움 |
| **관리 난이도** | 비교적 간단 | 복잡 (샤드 분배 및 관리 필요) |

### **파티셔닝과 샤딩을 함께 사용할 수 있나요?**
- **파티셔닝과 샤딩은 서로 보완적으로 사용**할 수 있음.
- 예: 샤딩으로 데이터를 여러 서버에 분산 저장하고, 각 서버 내에서 데이터를 파티셔닝.