# **리플리케이션 (Replication)**
- 데이터베이스의 데이터를 다른 서버에 **복제**해 동기화.
- 주로 데이터 백업, 장애 복구, 읽기 성능 향상을 위해 사용.


### **1) 기본 구조**
- 리플리케이션은 **마스터(Master)**와 **슬레이브(Slave)** 구조.
    - **마스터 서버**: 데이터를 생성, 수정, 삭제.
    - **슬레이브 서버**: 마스터 서버에서 데이터를 복제(읽기 전용).

### **2) 리플리케이션 유형**
| **유형** | **설명** | **예시** |
| --- | --- | --- |
| **마스터-슬레이브** | 하나의 마스터 서버가 여러 슬레이브 서버로 데이터를 복제. | MySQL 기본 설정. |
| **마스터-마스터** | 두 서버가 서로 데이터를 복제하며 읽기와 쓰기 모두 가능. | PostgreSQL, 일부 MySQL 설정. |
| **다중 마스터** | 여러 마스터 서버가 서로 데이터를 복제하며 분산된 환경에서 쓰기 작업 가능. | MongoDB, CockroachDB. |
| **링 리플리케이션** | 서버들이 링 형태로 서로 데이터를 복제. | 일부 NoSQL 데이터베이스. |

### **동기식 vs 비동기식 리플리케이션**

| **동기식 리플리케이션** | **비동기식 리플리케이션** |
| --- | --- |
| 마스터와 슬레이브 간 데이터가 항상 실시간으로 일치. | 슬레이브는 마스터의 변경 사항을 나중에 반영. |
| 마스터와 슬레이브 동기화가 완료된 후 클라이언트에 응답. | 마스터는 슬레이브의 동기화 상태를 기다리지 않음. |
| 데이터 일관성 높음. | 성능(쓰기 속도) 높음, 데이터 일관성은 낮을 수 있음. |
| 금융, 은행 시스템 등 높은 데이터 정확성이 필요한 환경. | 트래픽이 많은 웹 서비스에서 자주 사용. |

### **리플리케이션의 주요 장점**

### **1) 읽기 성능 향상**

- 슬레이브 서버를 추가하여 읽기 요청을 분산 처리.
- 대규모 트래픽 처리 가능.

### **2) 고가용성**

- 마스터 서버에 장애가 발생하면, 슬레이브 서버를 마스터로 승격(Failover)하여 서비스를 지속.

### **3) 데이터 손실 방지**

- 데이터를 다른 서버에 실시간 복제하여 데이터 유실 가능성을 줄임.

### **4) 백업 작업 중단 최소화**

- 슬레이브 서버에서 데이터를 백업하여 마스터 서버의 성능에 영향을 주지 않음.

### **리플리케이션의 단점**

### **1) 데이터 일관성 문제**

- 비동기 리플리케이션에서는 슬레이브 서버가 마스터 서버의 최신 데이터를 반영하지 못할 수 있음.

### **2) 설정 및 관리 복잡**

- 여러 서버 간의 동기화를 유지하려면 추가적인 설정과 관리가 필요.

### **3) 쓰기 성능 향상에는 한계**

- 리플리케이션은 읽기 성능은 향상시키지만, 쓰기 성능에는 큰 영향을 주지 못함.

### **6. 리플리케이션의 현실적인 예**

### **1) 쇼핑몰**

- **읽기 요청 분산**: 상품 정보를 여러 슬레이브 서버에 복제하여, 사용자의 조회 요청을 슬레이브 서버에서 처리.

### **2) 은행 시스템**

- **장애 복구**: 마스터 서버 장애 시 슬레이브 서버를 마스터로 승격하여 데이터 정확성을 유지.

### **3) 글로벌 서비스**

- **지역별 데이터 제공**: 각 대륙에 슬레이브 서버를 두어 사용자와 가까운 서버에서 데이터를 제공.

### **리플리케이션 문제 해결 방법**

1. **데이터 일관성 보장**:
    - **동기식 리플리케이션** 사용.
    - 데이터 불일치 발생 시 **점검 도구**(MySQL Replication Checker 등) 활용.
2. **복구 작업 자동화**: 장애 발생 시 슬레이브 서버를 자동으로 승격(Failover)하도록 구성.
3. **쓰기 성능 문제 해결**: *샤딩(Sharding)**을 통해 데이터를 분산 저장.