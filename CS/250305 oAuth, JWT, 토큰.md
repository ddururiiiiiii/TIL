- **인증(Authentication)**과 **권한(Authorization)**에 관련된 개념들로, 웹과 모바일 애플리케이션에서 보안적으로 중요한 역할을 함.

### **토큰 (Token)**

- **서버와 클라이언트 간에 사용자의 인증 상태나 권한 정보를 전달하기 위해 사용되는 일종의 "증명서"**
- **인증이나 권한 부여를 위해 서버와 클라이언트 사이에서 교환되는 임시 데이터**
- **안전한 사용:** 토큰은 중요한 인증 정보이므로, HTTPS와 같은 보안된 통신 채널을 통해 전달되어야 하며, 클라이언트 측에서도 안전하게 보관되어야 함.
- ex. JWT (JSON Web Token), OAuth 액세스 토큰

### 장점

- **무상태성 (Stateless):** 서버에서 별도의 세션 정보를 저장하지 않아도 되므로, 확장성이 좋고 여러 서버 간의 연동이 쉬움.
- **다양한 플랫폼 지원:** 웹, 모바일, API 등 여러 환경에서 동일한 방식으로 인증 정보를 전달할 수 있음.
- **효율적인 정보 전달:** 한 번의 토큰 발급으로 필요한 여러 정보를 담아서 보낼 수 있어, 클라이언트와 서버 간의 통신이 간단해짐.

### 단점

- **보안 위험:** 토큰이 탈취되면, 토큰의 유효 기간 동안 악용될 수 있으므로, HTTPS 등 안전한 통신 채널을 사용해야 함.
- **토큰 무효화 어려움:** JWT 같은 무상태 토큰은 서버에서 관리하는 세션 정보가 없기 때문에, 로그아웃이나 토큰 강제 만료 처리가 복잡할 수 있음.
- **토큰 크기:** 토큰에 다양한 정보를 담다 보면 크기가 커져서 네트워크 트래픽에 영향을 줄 수도 있음.

### 사용자 인증 VS 사용자 권한 부여

- 사용자 인증 : 사용자가 누구인지 확인하는 과정
    - 웹사이트 로그인시 사용자 이름과 비밀번호를 입력해서 인증
    - 지문, 얼굴 인식 등 다양한 인증 수단 사용
- 권한 부여
    - 인증된 사용자가 어던 리소스나 기능에 접근할 수 있는지 결정하는 과정.
    - 사용자가 어떤 작업을 수행할 수 있는지 또는 어떤 데이터에 접근할 수 있는지를 관리

---

### OAuth (Open Authorization) : 오오스, 오픈 어써라이제이션

- 사용자의 인증 정보를 직접 주고받지 않고, 한 서비스(애플리케이션)가 다른 서비스의 리소스(데이터 등)에 접근할 수 있도록 허용해주는 권한 부여 프로토콜
- ex. 구글 계정으로 로그인, 네이버 아이디로 로그인
    - 웹사이트는 사용자의 구글 비밀번호를 직접 받지 않고 구글이 발급해주는 접근 토큰을 사용하여 필요한 정보를 받아오는 방식
- 작동 방식(간단한 흐름)
    1. 사용자 승인 & 인증 및 권한 부여: 클라이언트가 사용자에게 권한 요청하고 사용자가 권한 승인함
    2. 토큰 발급 : 인증 서버가 액세스 토큰을 클라이언트에게 발급함.
    3. 데이터 접근 : 클라이언트가 액세스 토큰으로 리소스 서버에서 데이터 요청하여 필요한 데이터를 받아옴.

### **장점**

- 보안성 향상 : 사용자가 직접 로그인 정보를 클라이언트에 제공하지 않으므로, 클라이언트가 해킹당하더라도 비밀번호 유출 위험이 줄어듬.
- 편리한 권한 관리 : 사용자는 언제든지 권한 부여를 철회할 수 있고, 특정 데이터에 대한 접근만 허용할 수 있음.
- 다양한 응용 : 소셜 로그인 뿐만 아니라 API 접근 제어, 모바일 앱 & 웹서비스 간의 연동등 다양한 상황에서 활용 가능.

### **단점**

- 토큰 유츨 위험 : 엑세스 토큰이 탈취되면 보안 위협이 발생할 수 있음.
- 추가적인 의존성이 필요 : OAuth는 권한을 부여하기 위한 프로토콜이지 사용자 인증 프로토콜이 아님 그래서 사용자의 신원을 확인하고 싶다면 OAuth 위에 OpenID Connect 같은 인증 프로그림이 추가로 필요.

---

### **JWT (JSON Web Token)**

- 서버와 클라이언트 간에 정보를 안전하게 주고받기 위한 표준 토큰 형식.
- 주로 사용자 인증이나 권한 부여에 많이 사용되며 토큰 안에 필요한 정보를 담아 전달
- JSON 형식으로 인코딩된 정보를 담고 있으며, 서버에서 토큰만으로 사용자 검증이 가능함.
- ex. 로그인 후 사용자 인증, API 호출 시 권한 확인 등.
- 구조:
    1. **Header**: 토큰 타입(JWT)과 알고리즘 정보 담음.
    2. **Payload**: 사용자 정보나 권한 등 데이터 담음 (Base64로 인코딩됨).
    3. **Signature**: 토큰의 위변조 여부를 검증하기 위한 서명.
- JWT가 사용되는 방식
    1. 로그인 및 토큰 발급 : 사용자가 로그인하면 서버는 사용자의 신원을 확인한 후 JWT를 생성하여 클라이언트에게 전달
    2. 클라이언트의 요청 : 클라이언트는 이후 서버에 요청할 때 HTTP헤더에 JWT를 포함시켜 보냄
    3. 서버의 검증 : 서버는 받은 JWT의 서명을 검증하여 토큰이 변조되지 않았는지 확인하고, 페이로드에 담긴 정보를 바탕으로 사용자의 인증 상태와 권한을 확인

### **장점**

- 무상태(State-less) 인증 : 서버 측에 별도의 세션 정보를 저장하지 않아도 되므로, 확장성과 분산 시스템 환경에 적합
- 정보 전달의 효율성: 토큰 하나에 필요한 여러 정보를 담아 전달할 수 있어, 요청 시 별도의 데이터베이스 조회를 줄일 수 있음
- 보안 : 서명을 통해 토큰의 무결성을 검증할 수 있어, 데이터 변조를 방지할 수 있음

### **단점**

- **토큰 크기**: JWT는 일반적으로 Base64Url 인코딩된 문자열로 표현되므로, HTTP 헤더에 포함될 때 크기가 커질 수 있음
- 토큰 탈취 위험 : 만약 JWT가 노출되면, 만료 시간(`exp`) 전까지는 누구든지 해당 토큰을 사용해 인증된 요청을 할 수 있으므로, HTTPS와 같은 보안 채널을 통해 전달해야 함.
- 토큰 무효화의 어려움: JWT는 상태를 서버에 저장하지 않기 때문에, 발급된 토큰을 강제로 무효화하기 어려움(예: 로그아웃 시 바로 세션 종료가 어려울 수 있음)